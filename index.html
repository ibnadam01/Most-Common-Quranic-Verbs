<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aydan's Verb Quiz</title>
  <!-- Fallback font for English text -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet" />
  <!-- Canvas Confetti for fun effects -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    /* Incorporate the downloaded Uthmanic font */
    @font-face {
      font-family: 'Uthmanic';
      src: url('KFGQPC%20Uthmanic%20Script%20HAFS%20Regular.otf') format('opentype');
      font-weight: bold;
    }
    /* Full-page slideshow background with fixed Islamic-themed images */
    body {
      margin: 0;
      padding: 0;
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
      animation: slideshow 20s infinite;
      font-family: 'Cairo', sans-serif;
      background-color: #fff;
    }
    @keyframes slideshow {
      0% { background-image: url('https://upload.wikimedia.org/wikipedia/commons/e/ed/Kaaba_Mecca.jpg'); }
      33% { background-image: url('https://upload.wikimedia.org/wikipedia/commons/3/3e/Medina_Al-Masjid_An_Nabawi.jpg'); }
      66% { background-image: url('https://upload.wikimedia.org/wikipedia/commons/3/3c/Mosque_of_Omar_Istanbul.jpg'); }
      100% { background-image: url('https://upload.wikimedia.org/wikipedia/commons/e/ed/Kaaba_Mecca.jpg'); }
    }
    /* Kid-friendly quiz container styling with a bright border */
    .quiz-container {
      background: rgba(255, 255, 255, 0.95);
      border: 5px solid #ffeb3b;  /* Bright yellow border */
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      width: 90%;
      max-width: 600px;
      padding: 20px;
      margin: 30px auto;
      text-align: center;
      animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    h1 {
      margin-top: 0;
      font-size: 36px;
      color: #333;
    }
    /* Friendly tagline for kids */
    .tagline {
      font-size: 20px;
      color: #d32f2f;
      margin-bottom: 15px;
      font-weight: bold;
    }
    /* Status bar for live counters */
    #status {
      font-size: 18px;
      margin-bottom: 5px;
      color: #333;
    }
    /* Timer display styling */
    #timer {
      font-size: 20px;
      margin-bottom: 10px;
      color: #d32f2f;
      font-weight: bold;
    }
    /* Progress bar styling */
    .progress-bar {
      width: 100%;
      background: #ddd;
      height: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      overflow: hidden;
    }
    .progress {
      height: 100%;
      width: 0;
      background: #4caf50;
      transition: width 0.5s;
    }
    /* Arabic question styling using your Uthmanic font */
    .question {
      font-family: 'Uthmanic', 'Cairo', sans-serif;
      font-weight: bold;
      font-size: 72px;
      margin-bottom: 20px;
      color: #222;
      animation: bounceIn 0.8s;
    }
    @keyframes bounceIn {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.05); opacity: 1; }
      70% { transform: scale(0.9); }
      100% { transform: scale(1); }
    }
    /* Answer options styling with larger English text */
    .options {
      list-style-type: none;
      padding: 0;
    }
    .option {
      background: #f0f0f0;
      margin: 10px 0;
      padding: 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      font-size: 32px;
      color: #333;
    }
    .option:hover {
      background: #e0e0e0;
      transform: scale(1.02);
    }
    .option.correct {
      background: #a5d6a7;
    }
    .option.wrong {
      background: #ef9a9a;
    }
    .summary {
      font-size: 24px;
      color: #333;
    }
    .btn {
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      border-radius: 5px;
      background: #4caf50;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }
    .btn:hover {
      background: #45a049;
    }
  </style>
</head>
<body>
  <!-- Sound effects -->
  <audio id="click-sound" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
  <audio id="correct-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="wrong-sound" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>

  <div class="quiz-container">
    <h1>Aydan's Verb Quiz</h1>
    <div class="tagline">Let's learn Arabic verbs in a fun way! Tap the right answer before time runs out!</div>
    <div id="status">Correct: 0, Wrong: 0, Remaining: 47</div>
    <div id="timer"></div>
    <div class="progress-bar">
      <div class="progress" id="progress"></div>
    </div>
    <div id="quiz">
      <!-- Quiz content will be injected here by JavaScript -->
    </div>
  </div>

  <script>
    // List of 47 Arabic verbs with their English meanings
    const verbs = [
      { arabic: "قَالَ", english: "To say" },
      { arabic: "كَانَ", english: "To be" },
      { arabic: "ءَامَنَ", english: "To believe" },
      { arabic: "عَلِمَ", english: "To know" },
      { arabic: "جَعَلَ", english: "To make" },
      { arabic: "كَفَرَ", english: "To disbelieve" },
      { arabic: "جَآءَ", english: "To come" },
      { arabic: "عَمِلَ", english: "To do, to work" },
      { arabic: "آتَى", english: "To give" },
      { arabic: "رَءَا", english: "To see" },
      { arabic: "أَتَى", english: "To come, to bring" },
      { arabic: "شَآءَ", english: "To will, to wish" },
      { arabic: "خَلَقَ", english: "To create" },
      { arabic: "أَنزَلَ", english: "To send down, to reveal" },
      { arabic: "كَذَّبَ", english: "To deny, to reject" },
      { arabic: "دَعَا", english: "To call, to invite, to pray" },
      { arabic: "ٱتَّقَىٰ", english: "To be righteous, to fear (Allah)" },
      { arabic: "هَدَى", english: "To guide" },
      { arabic: "أَرَادَ", english: "To intend, to desire" },
      { arabic: "ٱتَّبَعَ", english: "To follow" },
      { arabic: "أَرْسَلَ", english: "To send" },
      { arabic: "أَخَذَ", english: "To take, to seize" },
      { arabic: "ٱتَّخَذَ", english: "To take" },
      { arabic: "عَبَدَ", english: "To worship" },
      { arabic: "ظَلَمَ", english: "To oppress, to wrong" },
      { arabic: "سَأَلَ", english: "To ask" },
      { arabic: "وَجَدَ", english: "To find" },
      { arabic: "أَخْرَجَ", english: "To bring forth, to drive out" },
      { arabic: "أَكَلَ", english: "To eat, to consume" },
      { arabic: "لَّيْسَ", english: "To not be" },
      { arabic: "فَعَلَ", english: "To do" },
      { arabic: "نَّظَرَ", english: "To look, to see" },
      { arabic: "ذَكَرَ", english: "To remember, to mention" },
      { arabic: "خَافَ", english: "To fear, to be afraid" },
      { arabic: "قَتَلَ", english: "To kill" },
      { arabic: "رَجَعَ", english: "To return" },
      { arabic: "سَمِعَ", english: "To hear, to listen" },
      { arabic: "تَوَلَّىٰ", english: "To turn" },
      { arabic: "أَمَرَ", english: "To order, to command" },
      { arabic: "دَخَلَ", english: "To enter" },
      { arabic: "جَزَىٰ", english: "To reward, to recompense" },
      { arabic: "أَطَاعَ", english: "To obey" },
      { arabic: "أَوْحَىٰٓ", english: "To reveal, to inspire" },
      { arabic: "أَشْرَكَ", english: "To associate partners" },
      { arabic: "أَلْقَىٰٓ", english: "To cast, to throw, to meet, to offer" },
      { arabic: "وَعَدَ", english: "To promise" },
      { arabic: "أَنفَقَ", english: "To spend" }
    ];

    let currentQuestionIndex = 0;
    let score = 0;
    let wrongCount = 0;
    let questions = [];
    let timerDuration = 15; // seconds per question
    let timerInterval;

    // Utility: Shuffle an array
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Prepare questions with one correct answer and three random incorrect options
    function prepareQuestions() {
      const shuffledVerbs = shuffle([...verbs]);
      questions = shuffledVerbs.map(verb => {
        const incorrectOptions = verbs.filter(v => v.english !== verb.english);
        shuffle(incorrectOptions);
        const options = incorrectOptions.slice(0, 3).map(opt => opt.english);
        options.push(verb.english);
        return {
          arabic: verb.arabic,
          correct: verb.english,
          options: shuffle(options)
        };
      });
    }

    // Update live status: correct, wrong, remaining
    function updateStatus() {
      const remaining = questions.length - currentQuestionIndex;
      document.getElementById('status').textContent = `Correct: ${score}, Wrong: ${wrongCount}, Remaining: ${remaining}`;
    }

    // Start or reset the countdown timer
    function startTimer() {
      clearInterval(timerInterval);
      let timeLeft = timerDuration;
      document.getElementById('timer').textContent = `Time Left: ${timeLeft}s`;
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `Time Left: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          forceNextQuestion();
        }
      }, 1000);
    }

    // Force move to next question if time runs out
    function forceNextQuestion() {
      const options = document.querySelectorAll('.option');
      options.forEach(option => option.style.pointerEvents = 'none');
      options.forEach(option => {
        if (option.textContent === questions[currentQuestionIndex].correct) {
          option.classList.add('correct');
        }
      });
      setTimeout(() => {
        currentQuestionIndex++;
        showQuestion();
      }, 1500);
    }

    // Display the current question
    function showQuestion() {
      updateStatus();
      clearInterval(timerInterval);
      const quizDiv = document.getElementById('quiz');
      quizDiv.innerHTML = '';
      if (currentQuestionIndex >= questions.length) {
        showSummary();
        return;
      }
      startTimer();
      const questionObj = questions[currentQuestionIndex];
      const questionEl = document.createElement('div');
      questionEl.className = 'question';
      questionEl.textContent = questionObj.arabic;
      quizDiv.appendChild(questionEl);
      const optionsList = document.createElement('ul');
      optionsList.className = 'options';
      questionObj.options.forEach(option => {
        const li = document.createElement('li');
        li.className = 'option';
        li.textContent = option;
        li.addEventListener('click', () => selectOption(li, questionObj.correct));
        optionsList.appendChild(li);
      });
      quizDiv.appendChild(optionsList);
      updateProgressBar();
    }

    // Process selected answer, play sounds, update score, and trigger confetti if correct
    function selectOption(selectedElement, correctAnswer) {
      clearInterval(timerInterval);
      document.getElementById('click-sound').play();
      const options = document.querySelectorAll('.option');
      options.forEach(option => option.style.pointerEvents = 'none');
      if (selectedElement.textContent === correctAnswer) {
        selectedElement.classList.add('correct');
        score++;
        document.getElementById('correct-sound').play();
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
      } else {
        selectedElement.classList.add('wrong');
        wrongCount++;
        document.getElementById('wrong-sound').play();
        options.forEach(option => {
          if (option.textContent === correctAnswer) {
            option.classList.add('correct');
          }
        });
      }
      updateStatus();
      setTimeout(() => {
        currentQuestionIndex++;
        showQuestion();
      }, 1500);
    }

    // Update progress bar width
    function updateProgressBar() {
      const progress = document.getElementById('progress');
      const progressPercent = (currentQuestionIndex / questions.length) * 100;
      progress.style.width = progressPercent + '%';
    }

    // Display summary at the end with a friendly message
    function showSummary() {
      clearInterval(timerInterval);
      updateStatus();
      const quizDiv = document.getElementById('quiz');
      quizDiv.innerHTML = '';
      const summaryEl = document.createElement('div');
      summaryEl.className = 'summary';
      summaryEl.innerHTML = `
        <h2>Awesome Job, Champ!</h2>
        <p>You got ${score} correct and ${wrongCount} wrong answers.</p>
        <p>You answered ${questions.length} questions in total.</p>
      `;
      quizDiv.appendChild(summaryEl);
      const restartBtn = document.createElement('button');
      restartBtn.className = 'btn';
      restartBtn.textContent = 'Play Again, Champ!';
      restartBtn.addEventListener('click', () => {
        document.getElementById('click-sound').play();
        restartQuiz();
      });
      quizDiv.appendChild(restartBtn);
      document.getElementById('progress').style.width = '100%';
      document.getElementById('timer').textContent = '';
    }

    function restartQuiz() {
      currentQuestionIndex = 0;
      score = 0;
      wrongCount = 0;
      prepareQuestions();
      showQuestion();
    }

    // Initialize the quiz on page load
    prepareQuestions();
    showQuestion();
  </script>
</body>
</html>